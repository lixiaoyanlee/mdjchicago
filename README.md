## Chicago  
Lottie动画生产力工具  

## Install
```
npm install
```

## 功能  

1. aealign - AfterEffect导出动画对齐  
   - **功能**  
     设计组通过AfterEffect导出的动画文件是视觉完成状态，内部定位无法方便的应用到开发中。aealign工具可以快速将导出动画中的所有点位取值归并到绘图区左上角(0,0)  
     所有在AE中以'变换'呈现的位置/锚点将相等，形状内部相关的点位信息也会根据新的坐标系进行调整。  
     最终效果是整个动画的呈现状态不变（包括旋转时），但所有需要修改的点位都基于绘图区左上角计算。
     
   - **支持内容**
     - 直线组成的形状
     - 椭圆
     - 方块
     - 一个图层内多个形状的组合
     - 渐变填充
     - 渐变描边
     - 文字
     - 蒙版
     - 预合成图层
     
    - **特例情况**  
      - 文字图层的坐标系会保留。（文字的对齐与锚点值强相关）  
        相应的，文字图层中带有的蒙版也会按照这个坐标系对齐。  
        但文字图层整体的位置值，仍然会是相对与左上角的确定位置。
      - **不**支持通过锚点移动实现的动画！所有锚点在动画整体时间内不可移动！
      - 若一些特殊情况不希望文件的某一部分被对齐，可以按以下步骤实现：
        1. AE中把不希望对齐的部分封装成预合成，引用并导出json；
        2. 编辑json文件，将asset中对应的预合成id前加下划线_，例如 comp_1 -> _comp_1
        3. 在引用预合成的位置上，同样将refId加下划线_
        4. 调用本工具对齐

   - **使用方法**
   ```
   node aealign.js -i <input> -o <output> [-h]
        其中 input 是设计交付的动画文件，output 是对齐后的结果文件，
        若使用 -h 选项，则一起生成 <output>.html 文件，方便快速检查。
   ```

   - **样例**
   ```
   node aelign.js -i ./demo/input.json -o ./demo/output/output.json -h
   浏览器打开demo/output/output.json.html文件，得到的效果与/demo/input_show一致
   （可以看到渐变填充和渐变描边的颜色错误，这个时lottie导出时的bug，可以手动解决）
   ```

2. build:lottie 在命令行中运行`build:lottie` 可以将核心代码打包，生成的文件在lottie/dist/ 文件夹下

   ```
   build:lottie
   ```

3.  在命令行中运行`init:init` 可以将设计师导出的json点位初始化；

   步骤，需要将设计师导出的json放到init文件加下，初始化后的文件是init/output.json文件
